import{w as e}from"./withConfigTransport.js";import{__decorate as t}from"tslib";import{throttle as i,noop as a}from"lodash-es";import{V as o,m as r,O as s,p as n}from"./vue-class-component.esm-bundler.js";import{mergeProps as f}from"vue";import{ssrRenderAttrs as d,ssrRenderStyle as l,ssrRenderSlot as v,ssrRenderClass as c}from"@vue/server-renderer";import{s as h}from"./style-inject.es.js";import"./VaConfig.js";function getWindowHeight(){return document.documentElement.clientHeight||window.innerHeight||document.body.clientHeight}function computeAffixedState({coordinates:e,offsetTop:t,offsetBottom:i,target:a}){let o=!1,r=!1;const s=getWindowHeight();if(null!=t&&s)if(a===window)o=e.top<=t;else{const{top:i}=a.getBoundingClientRect();o=e.top-i<=t}if(null!=i&&s)if(a===window)r=e.bottom>=s-i;else{const{bottom:t}=a.getBoundingClientRect();r=t-e.bottom<=i}return{isTopAffixed:o,isBottomAffixed:r}}function handleThrottledEvent(e,t){const{target:i,element:a,offsetTop:o,offsetBottom:r,setState:s,getState:n,initialPosition:f}=t;let d;const l=!e,v=a.getBoundingClientRect(),c={offsetBottom:r,offsetTop:o,target:i};d=computeAffixedState(l&&f?{coordinates:f,...c}:{coordinates:v,...c});const h=n();!function checkAffixedStateChange(e,t){return e.isTopAffixed!==t.isTopAffixed||e.isBottomAffixed!==t.isBottomAffixed}(h,d)?h.width!==v.width&&s({...h,width:v.width}):s({...d,width:v.width})}function useCaptureDefault(e){return"scroll"===e}const u=o.with(class AffixProps{constructor(){this.offsetTop=n({type:Number,default:void 0}),this.offsetBottom=n({type:Number,default:void 0}),this.target=n({type:Function,default:()=>()=>window})}});let m=class VaAffix extends(r(u)){constructor(){super(...arguments),this.state={isTopAffixed:!1,isBottomAffixed:!1},this.clearEventListeners=a}get computedClass(){return[{"va-affix--affixed":this.isAffixed}]}getTargetElement(){const{target:e}=this;return e()}get computedStyle(){const convertToPixels=e=>{const t=e();if(void 0!==t)return`${t}px`};return{top:this.state.isTopAffixed?convertToPixels((()=>{const e=this.getTargetElement();if(void 0!==this.offsetTop){if(e!==window){const{top:t}=e.getBoundingClientRect();return t+this.offsetTop}return this.offsetTop}})):null,bottom:this.state.isBottomAffixed?convertToPixels((()=>{const e=this.getTargetElement();if(void 0!==this.offsetBottom){if(e!==window){const{bottom:t}=e.getBoundingClientRect(),{offsetHeight:i,clientHeight:a}=e,o=i-a;return getWindowHeight()-(t-this.offsetBottom)+o}return this.offsetBottom}})):null,width:`${this.state.width}px`}}get isAffixed(){return this.state.isTopAffixed||this.state.isBottomAffixed}handleThrottledEvent(e,t){const i={...this.$data,...this.$props,element:this.$refs.element,target:this.getTargetElement(),setState:this.setState.bind(this),getState:this.getState.bind(this)};if(e&&"resize"!==e){if(t&&t.target){const a=this.getTargetElement();a===t.target||a===window?handleThrottledEvent(e,i):this.setState({isBottomAffixed:!1,isTopAffixed:!1})}}else handleThrottledEvent(e,i)}setState(e){this.state=e,this.$emit("change",this.isAffixed)}getState(){return this.state}mounted(){this.initialPosition=this.$refs.element.getBoundingClientRect(),this.clearEventListeners=function useEventsHandlerWithThrottle(e,{handler:t,useCapture:a=useCaptureDefault,wait:o=50}){const r=e.map((e=>{const r=i((i=>t(e,i)),o);return window.addEventListener(e,r,a(e)),()=>window.removeEventListener(e,r,a(e))}));return()=>r.forEach((e=>e()))}(["scroll","resize"],{handler:this.handleThrottledEvent}),this.$nextTick((()=>{this.handleThrottledEvent(null)}))}beforeUnmount(){this.clearEventListeners()}};m=t([s({name:"VaAffix",emits:["change"]})],m);var g=m;h(':root{--va-gray-light:#acb5be;--va-light-gray:#eee;--va-light-gray2:#eff4f5;--va-light-gray3:#f5f8f9;--va-lighter-gray:#ddd;--va-charcoal:#555;--va-darkest-gray:#333;--va-almost-black:#161616;--va-hover-black:#222;--va-vue-green:#4ae387;--va-vue-light-green:#dbf9e8;--va-light-green:#c8f9c5;--va-lighter-green:#d6ffd3;--va-light-blue:#dcf1ff;--va-light-yellow:#fff1c8;--va-light-pink:#ffcece;--va-vue-darkest-blue:#34495e;--va-vue-turquoise:#dbf9e7;--va-white:#fff;--va-theme-danger:#e34b4a;--va-theme-warning:#ffc200;--va-theme-red:#e34a4a;--va-theme-orange:#f7cc36;--va-theme-blue:#4ab2e3;--va-theme-blue-dark:#2c82e0;--va-theme-violet:#db76df;--va-theme-pale:#d9d9d9;--va-primary:var(--va-vue-green);--va-danger:var(--va-theme-red);--va-warning:var(--va-theme-orange);--va-info:var(--va-theme-blue);--va-success:var(--va-vue-green);--va-secondary:#babfc2;--va-dark-gray:#282828;--va-gray:#adb3b9;--va-default-gray:#8396a5;--va-dark-blue:#0e4ac4;--va-text-gray:#b4b4b4;--va-markdown-code:#d7234e;--va-prism-background:#f4f8fa;--va-separator-color:#e6e9ec;--va-border:0;--va-font-family:"Source Sans Pro",sans-serif;--va-letter-spacing:0.0375rem;--va-background-color:#fff;--va-swing-transition:0.3s cubic-bezier(0.25,0.8,0.5,1);--va-block-border-radius:0.375rem;--va-block-border:thin solid rgba(52,56,85,0.25);--va-block-box-shadow:0 2px 3px 0 rgba(52,56,85,0.25);--va-control-box-shadow:none;--va-control-border:0;--va-transition:0.2s cubic-bezier(0.4,0,0.6,1);--va-outline-border-width:0.125rem;--va-outline-box-shadow:none;--va-square-border-radius:0.25rem;--va-form-padding:1.25rem;--va-form-border-radius:0.125rem;--va-text-selected:#b3d4fc;--va-text-highlighted:#fff3d1;--va-link-color:var(--va-primary);--va-link-color-secondary:var(--va-secondary);--va-link-color-hover:var(--va-primary);--va-link-color-active:var(--va-primary);--va-link-color-visited:var(--va-primary);--va-muted:#7f828b;--va-li-background:var(--va-theme-blue-dark);--va-text-block:var(--va-light-gray3);--va-stripe-border-size:0.25rem;--va-box-shadow:0 0.25rem 0.5rem 0 rgba(59,63,73,0.15);--va-affix-affixed-zindex:10;--va-affix-affixed-position:fixed}.va-affix--affixed{position:var(--va-affix-affixed-position);z-index:var(--va-affix-affixed-zindex)}'),g.ssrRender=function ssrRender(e,t,i,a,o,r,s,n){t(`<div${d(f({ref:"element",class:"va-affix"},a))}><div style="${l({visibility:e.isAffixed?"hidden":"inherit"})}">`),v(e.$slots,"default",{},null,t,i),t("</div>"),e.isAffixed?(t(`<div class="${c(e.computedClass)}" style="${l(e.computedStyle)}">`),v(e.$slots,"default",{},null,t,i),t("</div>")):t("\x3c!----\x3e"),t("</div>")},g.__file="src/components/va-affix/VaAffix.vue";var p=e(g);export{p as default};
//# sourceMappingURL=index2.js.map
