{"version":3,"file":"color-config.js","sources":["../../src/services/color-config/color-functions.ts","../../src/services/color-config/color-config.ts"],"sourcesContent":["import { ColorTranslator } from 'colortranslator'\r\nimport { HSLObject, ColorInput } from 'colortranslator/dist/@types'\r\n\r\nexport const colorToRgba = (color: ColorInput, opacity: number) => {\r\n  return new ColorTranslator(color).setA(opacity).RGBA\r\n}\r\n\r\nexport const getTextColor = (color: ColorInput, darkColor = 'inherit', lightColor = '#ffffff') => {\r\n  const { R, G, B } = new ColorTranslator(color)\r\n  const isLightBackground = Math.sqrt(R * R * 0.241 + G * G * 0.691 + B * B * 0.068) > 130\r\n  return isLightBackground ? darkColor : lightColor\r\n}\r\n\r\nexport const getBoxShadowColor = (color: ColorInput) => {\r\n  return new ColorTranslator(color).setA(0.4).RGBA\r\n}\r\n\r\nexport const getHoverColor = (color: ColorInput) => {\r\n  return new ColorTranslator(color).setA(0.2).RGBA\r\n}\r\n\r\nexport const getFocusColor = (color: ColorInput) => {\r\n  return new ColorTranslator(color).setA(0.3).RGBA\r\n}\r\n\r\nexport const shiftHSLAColor = (color: ColorInput, offset: { h?: number; s?: number; l?: number; a?: number }) => {\r\n  const result = new ColorTranslator(color)\r\n\r\n  if (offset.h) { result.setH(result.H + offset.h) }\r\n\r\n  if (offset.s) { result.setS(result.S + offset.s) }\r\n\r\n  if (offset.l) { result.setL(result.L + offset.l) }\r\n\r\n  if (offset.a) { result.setA(result.A + offset.a) }\r\n\r\n  return result.HSLA\r\n}\r\n\r\nexport const setHSLAColor = (color: ColorInput, newColor: { h?: number; s?: number; l?: number; a?: number }) => {\r\n  const result = new ColorTranslator(color)\r\n\r\n  if (newColor.h !== undefined) { result.setH(newColor.h) }\r\n\r\n  if (newColor.s !== undefined) { result.setS(newColor.s) }\r\n\r\n  if (newColor.l !== undefined) { result.setL(newColor.l) }\r\n\r\n  if (newColor.a !== undefined) { result.setA(newColor.a) }\r\n\r\n  return result.HSLA\r\n}\r\n\r\n/**\r\n * This method guesses second color for gradient based on first one.\r\n * Calculation method should differ for different colors, so we split color circle\r\n * in zones.\r\n *\r\n * @param color\r\n */\r\nexport const shiftGradientColor = (color: ColorInput): string => {\r\n  const newColor = ColorTranslator.toHSLA(color, false) as HSLObject\r\n\r\n  // Gray\r\n  if (newColor.s < 10) {\r\n    return shiftHSLAColor(newColor, { h: 2, s: 5, l: 10 })\r\n  }\r\n  // Unsaturated (too pale, gray-ish, monotone)\r\n  // For unsaturated color, hue change does nothing.\r\n  if (newColor.s < 30) {\r\n    return shiftHSLAColor(newColor, { s: -14, l: 11 })\r\n  }\r\n  // Red\r\n  if ((newColor.h >= 0 && newColor.h < 44) || (newColor.h >= 285)) {\r\n    return shiftHSLAColor(newColor, { h: 11, s: 27, l: 8 })\r\n  }\r\n  // Yellow\r\n  if (newColor.h >= 44 && newColor.h < 85) {\r\n    return shiftHSLAColor(newColor, { h: 3, l: 9 })\r\n  }\r\n  // Green\r\n  if (newColor.h >= 85 && newColor.h < 165) {\r\n    return shiftHSLAColor(newColor, { h: 16, l: 14 })\r\n  }\r\n  // Blue\r\n  if (newColor.h >= 165 && newColor.h < 285) {\r\n    return shiftHSLAColor(newColor, { h: -15, s: 3, l: 2 })\r\n  }\r\n\r\n  throw new Error('This method should handle all colors. But it didn\\'t for some reason.')\r\n}\r\n\r\nexport const getGradientBackground = (color: string) => {\r\n  const colorLeft = shiftGradientColor(color)\r\n  const colorRight = ColorTranslator.toHSLA(color)\r\n\r\n  return `linear-gradient(to right, ${colorLeft}, ${colorRight})`\r\n}\r\n\r\n/**\r\n * Check if color is valid hsl, hsla, rga, rgba or hex color\r\n * Taken from https://www.regextester.com/103656\r\n * @param strColor\r\n */\r\nexport const isColor = (strColor: string): boolean => {\r\n  // Need to use Regex instead of DOM methods because we support SSR\r\n  const cssColorRegex = /^#([\\da-f]{3}){1,2}$|^#([\\da-f]{4}){1,2}$|(rgb|hsl)a?\\((\\s*-?\\d+%?\\s*,){2}(\\s*-?\\d+%?\\s*,?\\s*\\)?)(,\\s*(0?\\.\\d+)?|1)?\\)/\r\n\r\n  return cssColorRegex.test(strColor.toLocaleLowerCase())\r\n}\r\n","import { GlobalConfig, setGlobalConfig, getGlobalConfig } from '../global-config/global-config'\r\nimport {\r\n  getBoxShadowColor,\r\n  getHoverColor, getFocusColor,\r\n  getGradientBackground, isColor,\r\n  getTextColor, shiftHSLAColor,\r\n  setHSLAColor,\r\n} from './color-functions'\r\n\r\nexport type CssColor = string\r\nexport type ColorConfig = { [colorName: string]: CssColor }\r\n\r\n// Most default color - fallback when nothing else is found.\r\nexport const DEFAULT_COLOR = '#000000'\r\n\r\nexport const setColors = (colors: ColorConfig): void => {\r\n  setGlobalConfig((config: GlobalConfig) => ({\r\n    ...config,\r\n    colors: { ...config.colors, ...colors },\r\n  }))\r\n}\r\n\r\nexport const getColors = (): ColorConfig => {\r\n  return getGlobalConfig().colors || {}\r\n}\r\n\r\n/**\r\n * Returns color from config by name or return prop if color is it's valid hex, hsl, hsla, rgb or rgba color.\r\n * @param prop - should be color name or color in hex, hsl, hsla, rgb or rgba format\r\n * @param defaultColor - this color will be used if prop is invalid\r\n */\r\nexport const getColor = (prop?: string, defaultColor: string = DEFAULT_COLOR): CssColor => {\r\n  const colors = getColors()\r\n\r\n  if (!prop) {\r\n    prop = defaultColor\r\n  }\r\n\r\n  if (colors[prop]) {\r\n    return colors[prop]\r\n  }\r\n\r\n  if (isColor(prop)) {\r\n    return prop\r\n  }\r\n\r\n  return defaultColor\r\n}\r\n\r\nexport const colorsToCSSVariable = (colors: { [colorName: string]: string | undefined }, prefix = 'va') => {\r\n  return Object\r\n    .keys(colors)\r\n    .filter((key) => colors[key] !== undefined)\r\n    .reduce((acc: Record<string, any>, colorName: string) => {\r\n      acc[`--${prefix}-${colorName}`] = getColor(colors[colorName])\r\n      return acc\r\n    }, {})\r\n}\r\n\r\n// Here expose methods that user wants to use in vue component\r\nexport const useColors = () => {\r\n  return {\r\n    setColors,\r\n    getColors,\r\n    getColor,\r\n    getBoxShadowColor,\r\n    getHoverColor,\r\n    getFocusColor,\r\n    getGradientBackground,\r\n    getTextColor,\r\n    shiftHSLAColor,\r\n    setHSLAColor,\r\n    colorsToCSSVariable,\r\n  }\r\n}\r\n"],"names":["colorToRgba","color","opacity","ColorTranslator","setA","RGBA","getTextColor","darkColor","lightColor","R","G","B","Math","sqrt","getBoxShadowColor","getHoverColor","getFocusColor","shiftHSLAColor","offset","result","h","setH","H","s","setS","S","l","setL","L","a","A","HSLA","setHSLAColor","newColor","undefined","getGradientBackground","toHSLA","Error","shiftGradientColor","setColors","colors","setGlobalConfig","config","getColors","getGlobalConfig","getColor","prop","defaultColor","test","toLocaleLowerCase","colorsToCSSVariable","prefix","Object","keys","filter","key","reduce","acc","colorName","useColors"],"mappings":"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"}