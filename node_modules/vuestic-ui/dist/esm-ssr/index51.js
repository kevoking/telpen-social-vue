import{w as t}from"./withConfigTransport.js";import{__decorate as o}from"tslib";import{h as e,resolveComponent as a,mergeProps as s,createVNode as i,render as r}from"vue";import{V as n,m as l,O as v,p as c}from"./vue-class-component.esm-bundler.js";import{s as d}from"./VaIcon.js";import{C as f}from"./ColorMixin.js";import{ssrRenderAttrs as p,ssrInterpolate as h,ssrRenderStyle as u,ssrRenderComponent as m}from"@vue/server-renderer";import{s as g}from"./style-inject.es.js";import"lodash-es";import"./VaConfig.js";import"./SizeMixin.js";import"./color-config.js";import"colortranslator";const b=n.with(class VaToastRendererProps{constructor(){this.content=c({type:Function,default:void 0})}});let x=class VaToastRenderer extends(l(b)){render(){return this.content(e)}};x=o([v({name:"VaToastRenderer"})],x);const y=n.with(class ToastProps{constructor(){this.title=c({type:String,default:""}),this.offsetY=c({type:Number,default:16}),this.offsetX=c({type:Number,default:16}),this.message=c({type:[String,Function],default:""}),this.icon=c({type:String,default:"close"}),this.customClass=c({type:String,default:""}),this.duration=c({type:Number,default:5e3}),this.color=c({type:String,default:""}),this.closeable=c({type:Boolean,default:!0}),this.onClose=c({type:[Function,void 0]}),this.onClick=c({type:[Function,void 0]}),this.multiLine=c({type:Boolean,default:!1}),this.position=c({type:String,default:"top-right",validator:t=>["top-right","top-left","bottom-right","bottom-left"].includes(t)}),this.render=c({type:Function,default:void 0})}});let k=class VaToast extends(l(f,y)){constructor(){super(...arguments),this.timer=null,this.visible=!1}get positionX(){return this.position.includes("right")?"right":"left"}get positionY(){return this.position.includes("top")?"top":"bottom"}get toastClasses(){return[this.customClass]}get toastStyles(){return{[this.positionY]:`${this.offsetY}px`,[this.positionX]:`${this.offsetX}px`,backgroundColor:this.colorComputed}}destroyElement(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$el.remove()}onToastClick(){"function"!=typeof this.$props.onClick?this.$emit("click"):this.$props.onClick()}onToastClose(){this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement),"function"!=typeof this.onClose?this.$emit("close"):this.onClose()}clearTimer(){this.timer&&clearTimeout(this.timer)}startTimer(){this.duration>0&&(this.timer=setTimeout((()=>{this.visible&&this.onToastClose()}),this.duration))}mounted(){this.visible=!0,this.duration>0&&(this.timer=setTimeout((()=>{this.visible&&this.onToastClose()}),this.duration))}};k=o([v({name:"VaToast",components:{VaIcon:d,VaToastRenderer:x},emits:["on-click","on-close"]})],k);var _=k;g(':root{--va-gray-light:#acb5be;--va-light-gray:#eee;--va-light-gray2:#eff4f5;--va-light-gray3:#f5f8f9;--va-lighter-gray:#ddd;--va-charcoal:#555;--va-darkest-gray:#333;--va-almost-black:#161616;--va-hover-black:#222;--va-vue-green:#4ae387;--va-vue-light-green:#dbf9e8;--va-light-green:#c8f9c5;--va-lighter-green:#d6ffd3;--va-light-blue:#dcf1ff;--va-light-yellow:#fff1c8;--va-light-pink:#ffcece;--va-vue-darkest-blue:#34495e;--va-vue-turquoise:#dbf9e7;--va-white:#fff;--va-theme-danger:#e34b4a;--va-theme-warning:#ffc200;--va-theme-red:#e34a4a;--va-theme-orange:#f7cc36;--va-theme-blue:#4ab2e3;--va-theme-blue-dark:#2c82e0;--va-theme-violet:#db76df;--va-theme-pale:#d9d9d9;--va-primary:var(--va-vue-green);--va-danger:var(--va-theme-red);--va-warning:var(--va-theme-orange);--va-info:var(--va-theme-blue);--va-success:var(--va-vue-green);--va-secondary:#babfc2;--va-dark-gray:#282828;--va-gray:#adb3b9;--va-default-gray:#8396a5;--va-dark-blue:#0e4ac4;--va-text-gray:#b4b4b4;--va-markdown-code:#d7234e;--va-prism-background:#f4f8fa;--va-separator-color:#e6e9ec;--va-border:0;--va-font-family:"Source Sans Pro",sans-serif;--va-letter-spacing:0.0375rem;--va-background-color:#fff;--va-swing-transition:0.3s cubic-bezier(0.25,0.8,0.5,1);--va-block-border-radius:0.375rem;--va-block-border:thin solid rgba(52,56,85,0.25);--va-block-box-shadow:0 2px 3px 0 rgba(52,56,85,0.25);--va-control-box-shadow:none;--va-control-border:0;--va-transition:0.2s cubic-bezier(0.4,0,0.6,1);--va-outline-border-width:0.125rem;--va-outline-box-shadow:none;--va-square-border-radius:0.25rem;--va-form-padding:1.25rem;--va-form-border-radius:0.125rem;--va-text-selected:#b3d4fc;--va-text-highlighted:#fff3d1;--va-link-color:var(--va-primary);--va-link-color-secondary:var(--va-secondary);--va-link-color-hover:var(--va-primary);--va-link-color-active:var(--va-primary);--va-link-color-visited:var(--va-primary);--va-muted:#7f828b;--va-li-background:var(--va-theme-blue-dark);--va-text-block:var(--va-light-gray3);--va-stripe-border-size:0.25rem;--va-box-shadow:0 0.25rem 0.5rem 0 rgba(59,63,73,0.15);--va-toast-display:flex;--va-toast-width:330px;--va-toast-padding:14px 26px 14px 13px;--va-toast-border-radius:8px;--va-toast-box-sizing:border-box;--va-toast-border:1px solid #ebeef5;--va-toast-position:fixed;--va-toast-background-color:#fff;--va-toast-color:#fff;--va-toast-border-color:#fff;--va-toast-box-shadow:0 2px 12px 0 rgba(0,0,0,0.1);--va-toast-transition:opacity 0.3s,transform 0.3s,left 0.3s,right 0.3s,top 0.4s,bottom 0.3s;--va-toast-overflow:hidden;--va-toast-group-margin-left:13px;--va-toast-group-margin-right:8px;--va-toast-title-font-weight:bold;--va-toast-title-font-size:1rem;--va-toast-title-color:#303133;--va-toast-title-margin:0 0 6px;--va-toast-content-font-size:1rem;--va-toast-content-line-height:21px;--va-toast-content-padding-right:20px;--va-toast-icon-height:24px;--va-toast-icon-width:24px;--va-toast-icon-font-size:24px;--va-toast-close-icon-position:absolute;--va-toast-close-icon-top:18px;--va-toast-close-icon-right:15px;--va-toast-close-icon-cursor:pointer;--va-toast-close-icon-font-size:1rem;--va-toast-hover-color:#909399}.va-toast{align-items:center;background-color:#fff;border:1px solid var(--va-toast-border-color);border-radius:8px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);box-sizing:border-box;color:#fff;display:flex;overflow:hidden;padding:14px 26px 14px 13px;position:fixed;transition:opacity .3s,transform .3s,left .3s,right .3s,top .4s,bottom .3s;width:330px}.va-toast--multiline{min-height:70px}.va-toast--right{right:16px}.va-toast--left{left:16px}.va-toast__group{margin-left:var(--va-toast-group-margin-left);margin-right:var(--va-toast-group-margin-right)}.va-toast__title{color:var(--va-toast-title-color);font-size:var(--va-toast-title-font-size);font-weight:var(--va-toast-title-font-weight);margin:var(--va-toast-title-margin)}.va-toast__content{font-size:var(--va-toast-content-font-size);line-height:var(--va-toast-content-line-height);padding-right:var(--va-toast-content-padding-right)}.va-toast__content p{margin:0}.va-toast__icon{font-size:var(--va-toast-icon-font-size);height:var(--va-toast-icon-height);width:var(--va-toast-icon-width)}.va-toast__close-icon{cursor:pointer;font-size:1rem;position:absolute;right:15px;top:50%;transform:translateY(-50%)}.va-toast__close-icon:hover{color:var(--va-toast-hover-color)}.va-toast-fade-enter.right{right:0;transform:translateX(100%)}.va-toast-fade-enter.left{left:0;transform:translateX(-100%)}.va-toast-fade-leave-active{opacity:0}'),_.ssrRender=function ssrRender(t,o,e,i,r,n,l,v){const c=a("VaToastRenderer"),d=a("va-icon");o(`<div${p(s({style:[t.visible?null:{display:"none"},t.toastStyles],class:["va-toast",t.$props.multiLine?"va-toast--multiline":"",...t.toastClasses],role:"alert"},i))}><div class="va-toast__group">`),t.title?o(`<h2 class="va-toast__title">${h(t.title)}</h2>`):o("\x3c!----\x3e"),o(`<div class="va-toast__content" style="${u(t.message?null:{display:"none"})}"><p>${h(t.message)}</p></div>`),t.render?(o('<div class="va-toast__content">'),o(m(c,{content:t.render},null,e)),o("</div>")):o("\x3c!----\x3e"),t.closeable?o(m(d,{size:"small",name:t.icon,class:"va-toast__close-icon"},null,e)):o("\x3c!----\x3e"),o("</div></div>")},_.__file="src/components/va-toast/VaToast.vue";var w=t(_);let C=1,z=[];const getNodeProps=t=>{var o,e;return null===(e=null===(o=t.component)||void 0===o?void 0:o.proxy)||void 0===e?void 0:e.computedProps},closeNotification=(t,o)=>{var e;if(!t)return;if(!z.length)return void(C=1);const a=z.findIndex((o=>o===t));if(a<0)return;const s=getNodeProps(t),{offsetX:i,offsetY:r,position:n}=s,l=null===(e=t.el)||void 0===e?void 0:e.offsetHeight;o(),z=z.reduce(((o,e,s)=>{if(e===t)return o;if(e.component){const{offsetX:t,offsetY:o,position:v}=getNodeProps(e);if(s>a&&i===t&&r===o&&n===v&&e.el&&l){const[t,o]=e.el.style.transform.match(/[\d-]+(?=px)/g),a=((t,o,e)=>{const a=e.includes("bottom")?-1:1;return parseInt(t,10)-(o+5)*a})(o,l,v);e.el.style.transform=`translate(0, ${a}px)`}}return[...o,e]}),[]),z.length||(C=1)},mount=(t,{props:o,children:e,element:a,app:s}={})=>{let n,l=a;return n=i(t,{...o,onClose:()=>{closeNotification(n,(()=>((t,o)=>{t&&(r(null,t),t.remove()),t=null})(l))),(null==o?void 0:o.onClose)&&o.onClose()}},e),(null==s?void 0:s._context)&&(n.appContext=s._context),l?r(n,l):"undefined"!=typeof document&&r(n,l=document.createElement("div")),{vNode:n,el:l}},getToastOptions=t=>("string"==typeof t&&(t={message:t}),((t,...o)=>(o.forEach((o=>{if("object"==typeof o)for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)){const a=o[e];void 0!==a&&(t[e]=a)}})),t))({},t)),initNotification=(t,o)=>{const e=((t,o)=>{const{vNode:e,el:a}=mount(w,{app:o,props:t}),s=getNodeProps(e);if(a&&e.el&&s){document.body.appendChild(a);const{offsetX:t,offsetY:o,position:i}=s;e.el.style.display="flex",e.el.id="notification_"+C,e.el.style.zIndex="100";let r=0;return z.filter((e=>{const{offsetX:a,offsetY:s,position:r}=getNodeProps(e);return a===t&&s===o&&i===r})).forEach((t=>{r+=((t,o)=>{if(t.el){const e=o.includes("bottom")?-1:1;return(t.el.offsetHeight+5)*e}return 0})(t,i)})),e.el.style.transform=`translate(0, ${r}px)`,C+=1,e}return null})(getToastOptions(t),o);return e&&z.push(e),e};class Notification{constructor(t){this.app=t}init(t){var o,e;return null===(e=null===(o=initNotification(t,this.app))||void 0===o?void 0:o.el)||void 0===e?void 0:e.id}close(t){(t=>{const o=z.find((o=>{var e;return(null===(e=o.el)||void 0===e?void 0:e.id)===t}));o&&getNodeProps(o).onClose()})(t)}closeAll(){z.length?z.forEach((t=>getNodeProps(t).onClose())):C=1}}export{Notification as default};
//# sourceMappingURL=index51.js.map
