import{f as e,w as r}from"./withConfigTransport.js";import{__decorate as t}from"tslib";import{debounce as i}from"lodash-es";import{watch as s,resolveComponent as a,createVNode as o,resolveDynamicComponent as l,mergeProps as n,withCtx as c,renderSlot as d,createCommentVNode as v}from"vue";import{V as h,m as f,O as p,p as g}from"./vue-class-component.esm-bundler.js";import{C as m}from"./ColorMixin.js";import{VaProgressCircle as u}from"./index37.js";import{ssrRenderVNode as b,ssrRenderSlot as y,ssrRenderClass as $,ssrRenderComponent as _}from"@vue/server-renderer";import{s as x}from"./style-inject.es.js";import"./VaConfig.js";import"./color-config.js";import"colortranslator";import"./SizeMixin.js";const k=h.with(class InfiniteScrollProps{constructor(){this.load=g({type:Function,required:!0}),this.offset=g({type:Number,default:500}),this.reverse=g({type:Boolean,default:!1}),this.disabled=g({type:Boolean,default:!1}),this.scrollTarget=g({type:[Object,String],default:null}),this.debounce=g({type:Number,default:100}),this.tag=g({type:String,default:"div"})}});let T=class VaInfiniteScroll extends(f(m,k)){constructor(){super(...arguments),this.index=0,this.fetching=!1,this.error=!1,this.initialHeight=null}created(){s((()=>this.$props.disabled),(e=>{e?this.stop():this.resume()})),s((()=>this.$props.debounce),(e=>{this.setDebounce(e)}))}get scrollAmount(){return this.$props.offset+1+this.$el.offsetHeight}get scrollTargetElement(){return"string"==typeof this.$props.scrollTarget?document.querySelector(this.$props.scrollTarget):this.$props.scrollTarget||this.$el.parentElement}get colors(){return{primary:this.theme.getColor("primary","#23e066"),danger:this.theme.getColor("danger","#e34b4a")}}onLoad(){if(this.$props.disabled||this.error||this.fetching)return;const{scrollTop:e,scrollHeight:r}=this.scrollTargetElement,t=this.scrollTargetElement.offsetHeight;(this.$props.reverse?e<this.scrollAmount:e+t+this.scrollAmount>=r)&&(this.fetching=!0,this.scrollTop=this.$props.reverse?0:this.$el.offsetHeight,this.initialHeight=this.$el.offsetHeight,this.$props.load().then(this.finishLoading).catch(this.onError))}onError(){this.stop(),this.error=!0,this.fetching=!0,e(1200).then(this.stopErrorDisplay).then(this.resume)}stopErrorDisplay(){this.scrollTargetElement.scrollTop=this.$props.reverse?this.scrollAmount:this.scrollTargetElement.scrollTop-this.scrollTargetElement.offsetHeight-this.scrollAmount,this.error=!1,this.fetching=!1}finishLoading(){this.fetching=!1,this.$props.reverse&&(this.scrollTargetElement.scrollTop=this.$el.offsetHeight-this.initialHeight)}resume(){this.$props.disabled||this.scrollTargetElement.addEventListener("scroll",this.debouncedLoad,{passive:!0})}stop(){this.$props.disabled||(this.fetching=!1,this.scrollTargetElement.removeEventListener("scroll",this.debouncedLoad,{passive:!0}))}setDebounce(e){this.debouncedLoad=i(this.onLoad,e)}mounted(){this.scrollTargetElement&&(this.scrollTargetElement.style.overflowY="scroll",this.$props.reverse&&(this.scrollTargetElement.scrollTop=this.scrollTargetElement.scrollHeight),this.setDebounce(this.$props.debounce),this.scrollTargetElement.addEventListener("scroll",this.debouncedLoad,{passive:!0}))}beforeUnmount(){this.$props.disabled||this.scrollTargetElement.removeEventListener("scroll",this.debouncedLoad,{passive:!0})}};T=t([p({name:"VaInfiniteScroll",components:{VaProgressCircle:u}})],T);var E=T;x('[data-v-b399cd12]:root{--va-gray-light:#acb5be;--va-light-gray:#eee;--va-light-gray2:#eff4f5;--va-light-gray3:#f5f8f9;--va-lighter-gray:#ddd;--va-charcoal:#555;--va-darkest-gray:#333;--va-almost-black:#161616;--va-hover-black:#222;--va-vue-green:#4ae387;--va-vue-light-green:#dbf9e8;--va-light-green:#c8f9c5;--va-lighter-green:#d6ffd3;--va-light-blue:#dcf1ff;--va-light-yellow:#fff1c8;--va-light-pink:#ffcece;--va-vue-darkest-blue:#34495e;--va-vue-turquoise:#dbf9e7;--va-white:#fff;--va-theme-danger:#e34b4a;--va-theme-warning:#ffc200;--va-theme-red:#e34a4a;--va-theme-orange:#f7cc36;--va-theme-blue:#4ab2e3;--va-theme-blue-dark:#2c82e0;--va-theme-violet:#db76df;--va-theme-pale:#d9d9d9;--va-primary:var(--va-vue-green);--va-danger:var(--va-theme-red);--va-warning:var(--va-theme-orange);--va-info:var(--va-theme-blue);--va-success:var(--va-vue-green);--va-secondary:#babfc2;--va-dark-gray:#282828;--va-gray:#adb3b9;--va-default-gray:#8396a5;--va-dark-blue:#0e4ac4;--va-text-gray:#b4b4b4;--va-markdown-code:#d7234e;--va-prism-background:#f4f8fa;--va-separator-color:#e6e9ec;--va-border:0;--va-font-family:"Source Sans Pro",sans-serif;--va-letter-spacing:0.0375rem;--va-background-color:#fff;--va-swing-transition:0.3s cubic-bezier(0.25,0.8,0.5,1);--va-block-border-radius:0.375rem;--va-block-border:thin solid rgba(52,56,85,0.25);--va-block-box-shadow:0 2px 3px 0 rgba(52,56,85,0.25);--va-control-box-shadow:none;--va-control-border:0;--va-transition:0.2s cubic-bezier(0.4,0,0.6,1);--va-outline-border-width:0.125rem;--va-outline-box-shadow:none;--va-square-border-radius:0.25rem;--va-form-padding:1.25rem;--va-form-border-radius:0.125rem;--va-text-selected:#b3d4fc;--va-text-highlighted:#fff3d1;--va-link-color:var(--va-primary);--va-link-color-secondary:var(--va-secondary);--va-link-color-hover:var(--va-primary);--va-link-color-active:var(--va-primary);--va-link-color-visited:var(--va-primary);--va-muted:#7f828b;--va-li-background:var(--va-theme-blue-dark);--va-text-block:var(--va-light-gray3);--va-stripe-border-size:0.25rem;--va-box-shadow:0 0.25rem 0.5rem 0 rgba(59,63,73,0.15);--va-infinite-scroll-display:flex;--va-infinite-scroll-flex-direction:column;--va-infinite-scroll-reversed-flex-direction:column-reverse;--va-infinite-scroll-spinner-default-width:100%;--va-infinite-scroll-spinner-default-min-height:70px}.va-infinite-scroll[data-v-b399cd12]{display:var(--va-infinite-scroll-display);flex-direction:var(--va-infinite-scroll-flex-direction)}.va-infinite-scroll--reversed[data-v-b399cd12]{flex-direction:var(--va-infinite-scroll-reversed-flex-direction)}.va-infinite-scroll__spinner[data-v-b399cd12]{align-items:center;display:flex;justify-content:center}.va-infinite-scroll__spinner__default[data-v-b399cd12]{align-items:center;display:flex;justify-content:center;min-height:var(--va-infinite-scroll-spinner-default-min-height);width:var(--va-infinite-scroll-spinner-default-width)}.va-infinite-scroll__spinner--invisible[data-v-b399cd12]{visibility:hidden!important}'),E.ssrRender=function ssrRender(e,r,t,i,s,h,f,p){const g=a("va-progress-circle");b(r,o(l(e.$props.tag),n({class:["va-infinite-scroll",{"va-infinite-scroll--reversed":e.$props.reverse}]},i),{default:c(((r,t,i,s)=>{if(!t)return[d(e.$slots,"default",{ref:"content"}),o("div",{class:["va-infinite-scroll__spinner",{"va-infinite-scroll__spinner--invisible":!e.fetching}],ref:"loadingSlotContainer"},[e.$props.disabled?v("v-if",!0):d(e.$slots,"loading",{key:0},(()=>[o("div",{ref:"defaultSpinner",class:"va-infinite-scroll__spinner__default"},[o(g,{size:"small",thickness:.15,color:e.error?e.colors.danger:e.colors.primary,indeterminate:""},null,8,["thickness","color"])],512)]))],2)];y(e.$slots,"default",{ref:"content"},null,t,i,"data-v-b399cd12-s"+s),t(`<div class="${$([{"va-infinite-scroll__spinner--invisible":!e.fetching},"va-infinite-scroll__spinner"])}" data-v-b399cd12${s}>`),e.$props.disabled?t("\x3c!----\x3e"):y(e.$slots,"loading",{},(()=>{t(`<div class="va-infinite-scroll__spinner__default" data-v-b399cd12${s}>`),t(_(g,{size:"small",thickness:.15,color:e.error?e.colors.danger:e.colors.primary,indeterminate:""},null,i,s)),t("</div>")}),t,i,"data-v-b399cd12-s"+s),t("</div>")})),_:3}),t)},E.__scopeId="data-v-b399cd12",E.__file="src/components/va-infinite-scroll/VaInfiniteScroll.vue";var w=r(E);export{w as default};
//# sourceMappingURL=index50.js.map
