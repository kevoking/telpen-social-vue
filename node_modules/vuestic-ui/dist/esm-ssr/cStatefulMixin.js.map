{"version":3,"file":"cStatefulMixin.js","sources":["../../src/mixins/StatefulMixin/cStatefulMixin.ts"],"sourcesContent":["import { ref, computed, toRefs } from 'vue'\r\n\r\n/**\r\n * Returns `valueComputed` that is proxy for `modelValue`\r\n * if `stateful` prop is `false`\r\n * Record<any, any> & Record<'modelValue', T>\r\n */\r\nexport function useStateful<T> (props: { [key: string]: any, modelValue?: T }, emit: (event: 'update:modelValue', ...args: any[]) => void, defaultValue?: T) {\r\n  const valueState = ref(defaultValue === undefined ? props.modelValue : defaultValue)\r\n  const { modelValue } = toRefs(props)\r\n\r\n  const valueComputed = computed<T>({\r\n    get () {\r\n      if (props.stateful) {\r\n        return valueState.value as T\r\n      }\r\n      return modelValue?.value\r\n    },\r\n    set (value: any) {\r\n      if (props.stateful) {\r\n        valueState.value = value\r\n      }\r\n      emit('update:modelValue', value)\r\n    },\r\n  })\r\n\r\n  return { valueComputed }\r\n}\r\n\r\n/**\r\n * Insert this to `@Options`.\r\n * This will add `modelValue`, `stateful` props and `update:modelValue` emit.\r\n * If you want to use `modelValue` in your component you provide prop manually.\r\n *\r\n * @example\r\n ```\r\n  @Options({ name: 'Example', ...statefulComponentOptions })\r\n  export default class ExampleComponent extends Vue.with(props)\r\n ```\r\n */\r\nexport const statefulComponentOptions = {\r\n  props: {\r\n    stateful: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    modelValue: {\r\n      type: undefined,\r\n      default: undefined,\r\n    },\r\n  },\r\n  emits: ['update:modelValue'] as const,\r\n}\r\n"],"names":["useStateful","props","emit","defaultValue","valueState","ref","undefined","modelValue","toRefs","valueComputed","computed","get","stateful","value","set","statefulComponentOptions","type","Boolean","default","emits"],"mappings":"6DAOgBA,YAAgBC,EAA+CC,EAA4DC,GACzI,MAAMC,EAAaC,OAAqBC,IAAjBH,EAA6BF,EAAMM,WAAaJ,IACjEI,WAAEA,GAAeC,EAAOP,GAiB9B,MAAO,CAAEQ,cAfaC,EAAY,CAChCC,IAAG,IACGV,EAAMW,SACDR,EAAWS,MAEbN,MAAAA,SAAAA,EAAYM,MAErBC,IAAKD,GACCZ,EAAMW,WACRR,EAAWS,MAAQA,GAErBX,EAAK,oBAAqBW,aAkBnBE,EAA2B,CACtCd,MAAO,CACLW,SAAU,CACRI,KAAMC,QACNC,SAAS,GAEXX,WAAY,CACVS,UAAMV,EACNY,aAASZ,IAGba,MAAO,CAAC"}