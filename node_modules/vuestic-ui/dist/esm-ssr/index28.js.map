{"version":3,"file":"index28.js","sources":["../../src/components/va-image/VaImage.vue","../../src/components/va-image/VaImage.vue?vue&type=template&id=7ef4d00a&lang.js","../../src/components/va-image/index.ts"],"sourcesContent":["<template>\r\n  <div class=\"va-image\">\r\n    <div\r\n      v-if=\"loadingError\"\r\n      class=\"va-image__error\"\r\n    >\r\n      <slot name=\"error\" />\r\n    </div>\r\n\r\n    <div :style=\"paddingStyles\" />\r\n    <div\r\n      v-show=\"!loadingError && !loading\"\r\n      class=\"va-image__img\"\r\n      ref=\"img\"\r\n    >\r\n      <img :style=\"imageStyles\" :src=\"src\" @error=\"handleError\" @load=\"handleLoad\" />\r\n    </div>\r\n    <div class=\"va-image__overlay\">\r\n      <slot />\r\n    </div>\r\n    <div\r\n      v-if=\"loading\"\r\n      class=\"va-image__loader\"\r\n    >\r\n      <slot name=\"loader\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { watch } from 'vue'\r\nimport { Options, prop, Vue, mixins } from 'vue-class-component'\r\n\r\nclass ImageProps {\r\n  ratio = prop<number>({ type: [Number], default: 1 })\r\n  contain = prop<boolean>({ type: Boolean, default: false })\r\n  src = prop<string>({ type: String, required: true })\r\n}\r\n\r\nconst ImagePropsMixin = Vue.with(ImageProps)\r\n\r\n@Options({\r\n  name: 'VaImage',\r\n  emits: ['loaded', 'error'],\r\n})\r\nexport default class VaImage extends mixins(\r\n  ImagePropsMixin,\r\n) {\r\n  loading = true\r\n  loadingError = false\r\n\r\n  created () {\r\n    watch(() => this.src, () => {\r\n      this.loading = true\r\n      this.loadingError = false\r\n    })\r\n  }\r\n\r\n  get imageStyles () {\r\n    return {\r\n      'object-fit': this.contain ? 'contain' : 'cover',\r\n    }\r\n  }\r\n\r\n  get paddingStyles () {\r\n    return {\r\n      'padding-bottom': `${1 / this.ratio * 100}%`,\r\n    }\r\n  }\r\n\r\n  handleLoad () {\r\n    this.loading = false\r\n    this.$emit('loaded', this.src)\r\n  }\r\n\r\n  handleError (err: string) {\r\n    this.loadingError = true\r\n    this.loading = false\r\n    this.$emit('error', err)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../../styles/resources/resources\";\r\n@import 'variables';\r\n\r\n.va-image {\r\n  overflow: var(--va-image-overflow);\r\n  position: var(--va-image-position);\r\n\r\n  img {\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n\r\n  &__img,\r\n  &__loader,\r\n  &__error,\r\n  &__overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n  }\r\n\r\n  &__loader,\r\n  &__error,\r\n  &__overlay {\r\n    @include flex-center();\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"va-image\">\r\n    <div\r\n      v-if=\"loadingError\"\r\n      class=\"va-image__error\"\r\n    >\r\n      <slot name=\"error\" />\r\n    </div>\r\n\r\n    <div :style=\"paddingStyles\" />\r\n    <div\r\n      v-show=\"!loadingError && !loading\"\r\n      class=\"va-image__img\"\r\n      ref=\"img\"\r\n    >\r\n      <img :style=\"imageStyles\" :src=\"src\" @error=\"handleError\" @load=\"handleLoad\" />\r\n    </div>\r\n    <div class=\"va-image__overlay\">\r\n      <slot />\r\n    </div>\r\n    <div\r\n      v-if=\"loading\"\r\n      class=\"va-image__loader\"\r\n    >\r\n      <slot name=\"loader\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { watch } from 'vue'\r\nimport { Options, prop, Vue, mixins } from 'vue-class-component'\r\n\r\nclass ImageProps {\r\n  ratio = prop<number>({ type: [Number], default: 1 })\r\n  contain = prop<boolean>({ type: Boolean, default: false })\r\n  src = prop<string>({ type: String, required: true })\r\n}\r\n\r\nconst ImagePropsMixin = Vue.with(ImageProps)\r\n\r\n@Options({\r\n  name: 'VaImage',\r\n  emits: ['loaded', 'error'],\r\n})\r\nexport default class VaImage extends mixins(\r\n  ImagePropsMixin,\r\n) {\r\n  loading = true\r\n  loadingError = false\r\n\r\n  created () {\r\n    watch(() => this.src, () => {\r\n      this.loading = true\r\n      this.loadingError = false\r\n    })\r\n  }\r\n\r\n  get imageStyles () {\r\n    return {\r\n      'object-fit': this.contain ? 'contain' : 'cover',\r\n    }\r\n  }\r\n\r\n  get paddingStyles () {\r\n    return {\r\n      'padding-bottom': `${1 / this.ratio * 100}%`,\r\n    }\r\n  }\r\n\r\n  handleLoad () {\r\n    this.loading = false\r\n    this.$emit('loaded', this.src)\r\n  }\r\n\r\n  handleError (err: string) {\r\n    this.loadingError = true\r\n    this.loading = false\r\n    this.$emit('error', err)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../../styles/resources/resources\";\r\n@import 'variables';\r\n\r\n.va-image {\r\n  overflow: var(--va-image-overflow);\r\n  position: var(--va-image-position);\r\n\r\n  img {\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n\r\n  &__img,\r\n  &__loader,\r\n  &__error,\r\n  &__overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n  }\r\n\r\n  &__loader,\r\n  &__error,\r\n  &__overlay {\r\n    @include flex-center();\r\n  }\r\n}\r\n</style>\r\n","import withConfigTransport from '../../services/config-transport/withConfigTransport'\r\nimport VaImage from './VaImage.vue'\r\n\r\nexport default withConfigTransport(VaImage)\r\n"],"names":["ImagePropsMixin","Vue","with","ImageProps","constructor","this","prop","type","Number","default","Boolean","String","required","VaImage","mixins","created","watch","src","loading","loadingError","imageStyles","contain","paddingStyles","ratio","handleLoad","$emit","handleError","err","Options","name","emits","_mergeProps","class","_ctx","withConfigTransport"],"mappings":"2YAuCA,MAAMA,EAAkBC,EAAIC,KAN5B,MAAMC,WAANC,cACEC,WAAQC,EAAa,CAAEC,KAAM,CAACC,QAASC,QAAS,IAChDJ,aAAUC,EAAc,CAAEC,KAAMG,QAASD,SAAS,IAClDJ,SAAMC,EAAa,CAAEC,KAAMI,OAAQC,UAAU,OAS/C,IAAqBC,EAArB,MAAqBA,gBAAgBC,EACnCd,IADFI,kCAGEC,cAAU,EACVA,mBAAe,EAEfU,UACEC,GAAM,IAAMX,KAAKY,MAAK,KACpBZ,KAAKa,SAAU,EACfb,KAAKc,cAAe,KAIxBC,kBACE,MAAO,CACL,aAAcf,KAAKgB,QAAU,UAAY,SAI7CC,oBACE,MAAO,CACL,iBAAqB,EAAIjB,KAAKkB,MAAQ,IAApB,KAItBC,aACEnB,KAAKa,SAAU,EACfb,KAAKoB,MAAM,SAAUpB,KAAKY,KAG5BS,YAAaC,GACXtB,KAAKc,cAAe,EACpBd,KAAKa,SAAU,EACfb,KAAKoB,MAAM,QAASE,KAjCHd,KAJpBe,EAAQ,CACPC,KAAM,UACNC,MAAO,CAAC,SAAU,YAECjB,SAAAA,6jFC5CnBkB,GAAKC,MAAM,oBAEDC,sIAMKA,yCAEFA,gBAAiBA,yEAIbA,oBAAc,MAAKA,8FAM1BA,4KClBZ,MAAeC,EAAoBrB"}