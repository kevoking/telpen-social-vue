import{__decorate as t}from"tslib";import{V as e,m as n,s as o,O as r,p as i}from"./vue-class-component.esm-bundler.js";import{C as s}from"./ColorMixin.js";import{S as a}from"./SizeMixin.js";import{merge as c}from"lodash-es";import{g as l}from"./withConfigTransport.js";import{createVNode as m,resolveDynamicComponent as p,mergeProps as u,withCtx as f,renderSlot as g,createTextVNode as v,toDisplayString as d}from"vue";import{ssrRenderVNode as h,ssrRenderSlot as C,ssrInterpolate as y}from"@vue/server-renderer";import{s as w}from"./style-inject.es.js";const regexGroupsValues=(t,e)=>{if("string"!=typeof e&&e.global)return[...t.matchAll(e)].map((t=>t.slice(1)));const n=t.match(e)||[];return n?n.length>1?n.slice(1):n:[]},S=/{[^}]*}/g,dynamicSegmentStringToRegex=t=>t.replace(S,"(.*)"),dynamicSegments=(t,e)=>{const n=(t=>(t.match(S)||[]).map((t=>t.replace(/{|}/g,""))))(e),o=((t,e)=>regexGroupsValues(t,dynamicSegmentStringToRegex(e)))(t,e);return n.reduce(((t,e,n)=>({...t,[e]:o[n]})),{})},isIconConfigurationString=t=>"string"==typeof t.name,isIconConfigurationRegex=t=>t.name instanceof RegExp,isMatchConfiguration=(t,e)=>{return isIconConfigurationString(e)?((t,e)=>{const n=dynamicSegmentStringToRegex(e);return((t,e)=>(t.match(e)||[])[0]===t)(t,new RegExp(n))})(t,e.name):!!isIconConfigurationRegex(e)&&(n=t,e.name.test(n));var n},resolveIconConfiguration=(t,e)=>{if(isIconConfigurationString(e))return((t,e)=>{const n=dynamicSegments(t,e.name);return e.resolve&&e.resolve(n)})(t,e);if(isIconConfigurationRegex(e))return((t,e)=>{if(e.name.global)throw new Error(`Bad icon config with name ${e.name}. Please, don't use global regex as name.`);const n=regexGroupsValues(t,e.name);return e.resolveFromRegex&&e.resolveFromRegex(...n)})(t,e);throw Error("Unknown icon config")},findIconConfiguration=(t,e,n=[])=>{if(!t)return;const o=((t,e,n=[])=>{const o=e.find((e=>!n.includes(e.name.toString())&&isMatchConfiguration(t,e)));if(!o)throw new Error(`Can not find icon config from ${t}. Please provide default config.`);return o})(t,e,n),r=c(resolveIconConfiguration(t,o),o);return n=[...n,o.name.toString()],c(findIconConfiguration(r.to,e,n),r)},getIconConfiguration=(t,e=(()=>l().icons||[])())=>{const n=findIconConfiguration(t,e);return void 0===n?{}:(t=>{const e=t;return["name","to","resolve","resolveFromRegex"].forEach((t=>{delete e[t]})),e})(n)},useIcons=t=>({getIcon:t=>getIconConfiguration(t)});const $=e.with(class IconProps{constructor(){this.name=i({type:String,default:""}),this.tag=i({type:String}),this.component=i({type:Object}),this.color=i({type:String,default:void 0}),this.rotation=i({type:[String,Number],default:void 0}),this.spin=i({type:[String,Boolean],default:void 0})}});let x=class VaIcon extends(n(s,a,$)){constructor(){super(...arguments),this.iconContext=o((()=>useIcons(this.$props)))}get iconConfig(){return this.iconContext.getIcon(this.name)}get computedTag(){return this.$props.component||this.$props.tag||this.iconConfig.component||this.iconConfig.tag||"i"}get computedAttrs(){return{...this.iconConfig.attrs,...this.$attrs}}get computedClass(){const t=void 0===this.$props.spin?this.iconConfig.spin:this.$props.spin;return[this.iconConfig.class,this.getSpinClass(t)]}getSpinClass(t){if(void 0!==t)return"counter-clockwise"===t?"va-icon--spin-reverse":"va-icon--spin"}get computedStyle(){return{transform:this.rotation&&"rotate("+this.rotation+"deg)",cursor:this.$attrs.onClick?"pointer":null,color:void 0!==this.$props.color?this.colorComputed:this.iconConfig.color,fontSize:""===this.$props.size?"24px":this.sizeComputed}}get computedContent(){return this.iconConfig.content}};x=t([r({name:"VaIcon"})],x);var b=x;w(":root{--va-icon-vertical-align:middle;--va-icon-user-select:none}.va-icon{-webkit-user-select:var(--va-icon-user-select);-moz-user-select:var(--va-icon-user-select);-ms-user-select:var(--va-icon-user-select);user-select:var(--va-icon-user-select);vertical-align:var(--va-icon-vertical-align)}.va-icon.va-icon{font-style:normal}.va-icon--spin,.va-icon--spin-reverse{-webkit-animation:va-icon--spin-animation 1.5s linear infinite;animation:va-icon--spin-animation 1.5s linear infinite}.va-icon--spin-reverse{animation-direction:reverse}@-webkit-keyframes va-icon--spin-animation{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes va-icon--spin-animation{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"),b.ssrRender=function ssrRender(t,e,n,o,r,i,s,a){h(e,m(p(t.computedTag),u(t.computedAttrs,{"aria-hidden":"true",notranslate:"",class:["va-icon",t.computedClass],style:t.computedStyle},o),{default:f(((e,n,o,r)=>{if(!n)return[g(t.$slots,"default",{},(()=>[v(d(t.computedContent),1)]))];C(t.$slots,"default",{},(()=>{n(`${y(t.computedContent)}`)}),n,o,r)})),_:3}),n)},b.__file="src/components/va-icon/VaIcon.vue";export{b as s,useIcons as u};
//# sourceMappingURL=VaIcon.js.map
