import{w as e}from"./withConfigTransport.js";import{__decorate as o}from"tslib";import{nextTick as t,watch as r,openBlock as a,createElementBlock as n,normalizeClass as i,createElementVNode as s,withKeys as d,withModifiers as c,renderSlot as h,normalizeStyle as l,createCommentVNode as v}from"vue";import{V as p,m as u,O as f,p as m}from"./vue-class-component.esm-bundler.js";import{DebounceLoader as b}from"asva-executors";import{createPopper as g}from"@popperjs/core";import{S as k}from"./StatefulMixin.js";import{s as w}from"./style-inject.es.js";import"lodash-es";import"./VaConfig.js";const y=p.with(class DropdownProps{constructor(){this.debugId=m({type:String,default:""}),this.position=m({type:String,default:""}),this.hoverOverTimeout=m({type:Number,default:30}),this.hoverOutTimeout=m({type:Number,default:200}),this.boundaryBody=m({type:Boolean}),this.modelValue=m({type:Boolean,default:!1}),this.disabled=m({type:Boolean,default:!1}),this.keepAnchorWidth=m({type:Boolean}),this.preventOverflow=m({type:Boolean,default:!1}),this.closeOnContentClick=m({type:Boolean,default:!0}),this.closeOnClickOutside=m({type:Boolean,default:!0}),this.closeOnAnchorClick=m({type:Boolean,default:!0}),this.isContentHoverable=m({type:Boolean,default:!0}),this.offset=m({type:[Array,Number],default:()=>[]}),this.trigger=m({type:String,default:"click",validator:e=>["click","hover","none"].includes(e)}),this.stateful=m({type:Boolean,default:!0})}});let C=class VaDropdown extends(u(k,y)){constructor(){super(...arguments),this.popperInstance=null,this.anchorWidth=0}get anchorWidthStyles(){return{width:this.anchorWidth+"px",maxWidth:this.anchorWidth+"px"}}get classComputed(){return{"va-dropdown--disabled":this.$props.disabled}}get showContent(){return this.valueComputed}handlePopperInstance(){this.popperInstance&&this.removePopper(),this.showContent&&(this.updateAnchorWidth(),t((()=>{this.initPopper()})))}handleClick(e,o){this.$emit(e),o&&this.hide()}onDropdownContentClick(){this.handleClick("dropdown-content-click",this.closeOnContentClick)}onClickOutside(){this.handleClick("click-outside",this.closeOnClickOutside)}onAnchorClick(){if(!this.$props.disabled){if("click"===this.$props.trigger){if(this.valueComputed)return void this.handleClick("anchor-click",this.closeOnAnchorClick);this.valueComputed=!0}this.$emit("anchor-click")}}onMouseOver(){this.$props.disabled||"hover"!==this.$props.trigger||(this.valueComputed||this.hoverOverDebounceLoader.run(),this.hoverOutDebounceLoader.reset())}onMouseOut(){"hover"===this.$props.trigger&&(this.isContentHoverable?this.hoverOutDebounceLoader.run():this.valueComputed=!1,this.hoverOverDebounceLoader.reset())}registerClickOutsideListener(){document.addEventListener("click",(e=>this.handleDocumentClick(e)),!1)}unregisterClickOutsideListener(){document.removeEventListener("click",(e=>this.handleDocumentClick(e)),!1)}handleDocumentClick(e){let o=e.target;const t=[];for(;o;)t.push(o),o=o.parentNode;t.includes(this.$refs.anchor)||t.includes(this.$refs.contentWrapper)||this.showContent&&this.onClickOutside()}updateAnchorWidth(){this.keepAnchorWidth&&(this.anchorWidth=this.$refs.anchor.offsetWidth),this.popperInstance&&this.popperInstance.forceUpdate()}hide(){this.valueComputed=!1}initPopper(){const e={placement:this.position||"bottom",modifiers:[],onFirstUpdate:()=>{this.valueComputed=!0}},o={name:"preventOverflow",options:{}};this.preventOverflow&&e.modifiers.push(o),this.boundaryBody&&(o.options.boundary=document.body),this.offset&&e.modifiers.push({name:"offset",options:{offset:Array.isArray(this.offset)?this.offset:[this.offset]}}),this.popperInstance=g(this.$refs.anchor,this.$refs.contentWrapper,e)}removePopper(){this.valueComputed=!1,this.popperInstance&&(this.popperInstance.destroy(),this.popperInstance=null)}created(){r((()=>this.showContent),(()=>{this.handlePopperInstance()})),this.hoverOverDebounceLoader=new b((async()=>{this.valueComputed=!0}),this.hoverOverTimeout),this.hoverOutDebounceLoader=new b((async()=>{this.valueComputed=!1}),this.hoverOutTimeout),this.$isServer||this.registerClickOutsideListener()}mounted(){this.handlePopperInstance()}beforeUnmount(){this.unregisterClickOutsideListener(),this.removePopper()}};C=o([f({name:"VaDropdown",emits:["update:modelValue","anchor-click","click-outside","dropdown-content-click"]})],C);var O=C;w(':root{--va-gray-light:#acb5be;--va-light-gray:#eee;--va-light-gray2:#eff4f5;--va-light-gray3:#f5f8f9;--va-lighter-gray:#ddd;--va-charcoal:#555;--va-darkest-gray:#333;--va-almost-black:#161616;--va-hover-black:#222;--va-vue-green:#4ae387;--va-vue-light-green:#dbf9e8;--va-light-green:#c8f9c5;--va-lighter-green:#d6ffd3;--va-light-blue:#dcf1ff;--va-light-yellow:#fff1c8;--va-light-pink:#ffcece;--va-vue-darkest-blue:#34495e;--va-vue-turquoise:#dbf9e7;--va-white:#fff;--va-theme-danger:#e34b4a;--va-theme-warning:#ffc200;--va-theme-red:#e34a4a;--va-theme-orange:#f7cc36;--va-theme-blue:#4ab2e3;--va-theme-blue-dark:#2c82e0;--va-theme-violet:#db76df;--va-theme-pale:#d9d9d9;--va-primary:var(--va-vue-green);--va-danger:var(--va-theme-red);--va-warning:var(--va-theme-orange);--va-info:var(--va-theme-blue);--va-success:var(--va-vue-green);--va-secondary:#babfc2;--va-dark-gray:#282828;--va-gray:#adb3b9;--va-default-gray:#8396a5;--va-dark-blue:#0e4ac4;--va-text-gray:#b4b4b4;--va-markdown-code:#d7234e;--va-prism-background:#f4f8fa;--va-separator-color:#e6e9ec;--va-border:0;--va-font-family:"Source Sans Pro",sans-serif;--va-letter-spacing:0.0375rem;--va-background-color:#fff;--va-swing-transition:0.3s cubic-bezier(0.25,0.8,0.5,1);--va-block-border-radius:0.375rem;--va-block-border:thin solid rgba(52,56,85,0.25);--va-block-box-shadow:0 2px 3px 0 rgba(52,56,85,0.25);--va-control-box-shadow:none;--va-control-border:0;--va-transition:0.2s cubic-bezier(0.4,0,0.6,1);--va-outline-border-width:0.125rem;--va-outline-box-shadow:none;--va-square-border-radius:0.25rem;--va-form-padding:1.25rem;--va-form-border-radius:0.125rem;--va-text-selected:#b3d4fc;--va-text-highlighted:#fff3d1;--va-link-color:var(--va-primary);--va-link-color-secondary:var(--va-secondary);--va-link-color-hover:var(--va-primary);--va-link-color-active:var(--va-primary);--va-link-color-visited:var(--va-primary);--va-muted:#7f828b;--va-li-background:var(--va-theme-blue-dark);--va-text-block:var(--va-light-gray3);--va-stripe-border-size:0.25rem;--va-box-shadow:0 0.25rem 0.5rem 0 rgba(59,63,73,0.15);--va-dropdown-line-height:1;--va-dropdown-content-wrapper-z-index:100}.va-dropdown{line-height:var(--va-dropdown-line-height)}.va-dropdown--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-dropdown__content-wrapper{z-index:var(--va-dropdown-content-wrapper-z-index)}'),O.render=function render$1(e,o,t,r,p,u){return a(),n("div",{class:i(["va-dropdown",e.classComputed])},[s("div",{class:"va-dropdown__anchor",onMouseover:o[0]||(o[0]=o=>e.onMouseOver()),onMouseout:o[1]||(o[1]=o=>e.onMouseOut()),onClick:o[2]||(o[2]=o=>e.onAnchorClick()),onKeyup:o[3]||(o[3]=d(c((o=>e.onAnchorClick()),["stop","prevent"]),["enter"])),ref:"anchor"},[h(e.$slots,"anchor")],544),e.showContent?(a(),n("div",{key:0,class:"va-dropdown__content-wrapper",onMouseover:o[4]||(o[4]=o=>e.$props.isContentHoverable&&e.onMouseOver()),onMouseout:o[5]||(o[5]=o=>e.onMouseOut()),onClick:o[6]||(o[6]=c((o=>e.onDropdownContentClick()),["stop"])),ref:"contentWrapper"},[s("div",{style:l(e.$props.keepAnchorWidth?e.anchorWidthStyles:"")},[h(e.$slots,"default")],4)],544)):v("v-if",!0)],2)},O.__file="src/components/va-dropdown/VaDropdown.vue";const x={class:"va-dropdown__content"};w(":root{--va-dropdown-content-background:#fff;--va-dropdown-content-padding:0.5rem;--va-dropdown-content-box-shadow:var(--va-box-shadow);--va-dropdown-content-border-radius:4px}.va-dropdown__content{background:var(--va-dropdown-content-background);border-radius:var(--va-dropdown-content-border-radius);box-shadow:var(--va-dropdown-content-box-shadow);padding:var(--va-dropdown-content-padding)}");const $={render:function render(e,o){return a(),n("div",x,[h(e.$slots,"default")])},__file:"src/components/va-dropdown/VaDropdownContent/VaDropdownContent.vue"};var D=e($),W=e(O);export{D as VaDropdownContent,W as default};
//# sourceMappingURL=index24.js.map
