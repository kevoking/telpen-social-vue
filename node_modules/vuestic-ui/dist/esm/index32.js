import{w as e}from"./withConfigTransport.js";import{__decorate as a}from"tslib";import{h as o,Transition as t,watch as i,resolveComponent as r,openBlock as n,createElementBlock as l,createVNode as s,withCtx as d,normalizeStyle as m,createCommentVNode as v,createElementVNode as c,normalizeClass as h,createBlock as p,toDisplayString as u,renderSlot as f,createTextVNode as g}from"vue";import{V as y,O as x,m as b,p as _}from"./vue-class-component.esm-bundler.js";import{noop as w}from"lodash-es";import{C as k}from"./ColorMixin.js";import{S as $}from"./StatefulMixin.js";import C from"./index8.js";import E from"./index27.js";import{s as z}from"./style-inject.es.js";import"./VaConfig.js";import"./color-config.js";import"colortranslator";import"./RouterLinkMixin.js";import"./SizeMixin.js";import"./LoadingMixin.js";import"./index37.js";import"./VaIcon.js";const ownerDocument=e=>e&&e.ownerDocument||document,listen=({node:e,eventName:a,handler:o,options:t})=>(e.addEventListener(a,o,t),()=>{e.removeEventListener(a,o,t)}),T="production"!==process.env.NODE_ENV;class ClickOutsideMixin extends y{constructor(){super(...arguments),this.preventMouseRootTrigger=!0}handleMouse(e,a){if(!this.preventMouseRootTrigger){const{onClickOutside:o}=a;o(e)}}handleMouseCapture(e,a){var o;(o=e,document.documentElement.clientWidth<o.clientX||document.documentElement.clientHeight<o.clientY)||(this.preventMouseRootTrigger=((e,a)=>{if(T&&!a)throw new Error("ClickOutside captured a click event but does not have a target to compare it to.");let o;if(e.composedPath)o=e.composedPath().indexOf(a)>-1;else{const r=ownerDocument(a);o=!(r.documentElement&&r.documentElement.contains(e.target))||(t=a,i=e.target,t.contains?t.contains(i):!(!t.compareDocumentPosition||t!==i&&!(16&t.compareDocumentPosition(i))))}var t,i,r;return!(a&&(r=e,!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey))&&(e=>0===e.button)(e)&&!o)})(e,a))}registerClickOutsideEvents(e,a){const{trigger:o,disabled:t}=a;if(t||!e)return w;const i=ownerDocument(e),r=listen({node:i,eventName:o,handler:a=>this.handleMouseCapture(a,e),options:!0}),n=listen({node:i,eventName:o,handler:e=>this.handleMouse(e,a)});let l=[];return"ontouchstart"in i.documentElement&&(l=[].slice.call(i.body.children).map((e=>listen({node:e,eventName:"mousemove",handler:w})))),()=>{r(),n(),l.forEach((e=>e())),this.preventMouseRootTrigger=!0}}}const M=y.with(class ModalProps{constructor(){this.modelValue=_({type:Boolean,default:!1}),this.title=_({type:String,default:""}),this.message=_({type:String,default:""}),this.okText=_({type:String,default:"OK"}),this.cancelText=_({type:String,default:"Cancel"}),this.hideDefaultActions=_({type:Boolean,default:!1}),this.fullscreen=_({type:Boolean,default:!1}),this.mobileFullscreen=_({type:Boolean,default:!0}),this.noDismiss=_({type:Boolean,default:!1}),this.noOutsideDismiss=_({type:Boolean,default:!1}),this.noEscDismiss=_({type:Boolean,default:!1}),this.maxWidth=_({type:String,default:""}),this.maxHeight=_({type:String,default:""}),this.size=_({type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)}),this.fixedLayout=_({type:Boolean,default:!1}),this.withoutTransitions=_({type:Boolean,default:!1}),this.overlay=_({type:Boolean,default:!0}),this.overlayOpacity=_({type:[Number,String],default:void 0}),this.zIndex=_({type:[Number,String],default:void 0})}});class ModalElementProps{constructor(){this.isTransition=_({type:Boolean,default:!0})}}let S=class ModalElement extends(y.with(ModalElementProps)){render(){const e=this.$slots.default?this.$slots.default(this.$attrs):null;return this.$props.isTransition?o(t,{...this.$attrs},this.$slots):e}};S=a([x({name:"ModalElement"})],S);let B=class VaModal extends(b(k,$,ClickOutsideMixin,M)){constructor(){super(...arguments),this.clearClickOutsideEvents=w}created(){i((()=>this.valueComputed),(e=>{if(e){window.addEventListener("keyup",this.listenKeyUp);const e={onClickOutside:()=>{this.$emit("click-outside"),this.cancel()},disabled:this.$props.noOutsideDismiss||this.$props.noDismiss||!1,trigger:"mousedown"};this.$nextTick((()=>{const a=this.$refs.modal;this.clearClickOutsideEvents=this.registerClickOutsideEvents(a,e)}))}else this.clearClickOutsideEvents(),window.removeEventListener("keyup",this.listenKeyUp)}))}get computedClass(){return{"va-modal--fullscreen":this.$props.fullscreen,"va-modal--mobile-fullscreen":this.$props.mobileFullscreen,"va-modal--fixed-layout":this.$props.fixedLayout,[`va-modal--size-${this.$props.size}`]:"medium"!==this.$props.size}}get computedOverlayStyles(){return!!document.querySelectorAll(".va-modal__overlay").length?{}:{"background-color":`rgba(0, 0, 0, ${this.$props.overlayOpacity||.6})`,"z-index":null!=this.$props.zIndex?parseInt(this.$props.zIndex)-10:void 0}}get computedModalContainerStyle(){return{"z-index":this.$props.zIndex}}get hasContentSlot(){return this.$slots.default}get hasHeaderSlot(){return this.$slots.header}get hasFooterSlot(){return this.$slots.footer}show(){this.valueComputed=!0}hide(){this.valueComputed=!1}toggle(){this.valueComputed=!this.valueComputed}cancel(){this.hide(),this.$emit("cancel")}ok(){this.hide(),this.$emit("ok")}listenKeyUp(e){"Escape"!==e.code||this.$props.noEscDismiss||this.$props.noDismiss||this.cancel()}onBeforeEnterTransition(e){this.$emit("before-open",e)}onAfterEnterTransition(e){this.$emit("open",e)}onBeforeLeaveTransition(e){this.$emit("before-close",e)}onAfterLeaveTransition(e){this.$emit("close",e)}};B=a([x({name:"VaModal",components:{VaButton:C,VaIcon:E,ModalElement:S},emits:["update:modelValue","cancel","ok","before-open","open","before-close","close","click-outside"]})],B);var O=B;const j={class:"va-modal"},L={key:1,class:"va-modal__header"},D={key:2,class:"va-modal__message"},A={key:3,class:"va-modal__message"},V={key:4,class:"va-modal__footer"},H={key:5,class:"va-modal__footer"};z(':root{--va-gray-light:#acb5be;--va-light-gray:#eee;--va-light-gray2:#eff4f5;--va-light-gray3:#f5f8f9;--va-lighter-gray:#ddd;--va-charcoal:#555;--va-darkest-gray:#333;--va-almost-black:#161616;--va-hover-black:#222;--va-vue-green:#4ae387;--va-vue-light-green:#dbf9e8;--va-light-green:#c8f9c5;--va-lighter-green:#d6ffd3;--va-light-blue:#dcf1ff;--va-light-yellow:#fff1c8;--va-light-pink:#ffcece;--va-vue-darkest-blue:#34495e;--va-vue-turquoise:#dbf9e7;--va-white:#fff;--va-theme-danger:#e34b4a;--va-theme-warning:#ffc200;--va-theme-red:#e34a4a;--va-theme-orange:#f7cc36;--va-theme-blue:#4ab2e3;--va-theme-blue-dark:#2c82e0;--va-theme-violet:#db76df;--va-theme-pale:#d9d9d9;--va-primary:var(--va-vue-green);--va-danger:var(--va-theme-red);--va-warning:var(--va-theme-orange);--va-info:var(--va-theme-blue);--va-success:var(--va-vue-green);--va-secondary:#babfc2;--va-dark-gray:#282828;--va-gray:#adb3b9;--va-default-gray:#8396a5;--va-dark-blue:#0e4ac4;--va-text-gray:#b4b4b4;--va-markdown-code:#d7234e;--va-prism-background:#f4f8fa;--va-separator-color:#e6e9ec;--va-border:0;--va-font-family:"Source Sans Pro",sans-serif;--va-letter-spacing:0.0375rem;--va-background-color:#fff;--va-swing-transition:0.3s cubic-bezier(0.25,0.8,0.5,1);--va-block-border-radius:0.375rem;--va-block-border:thin solid rgba(52,56,85,0.25);--va-block-box-shadow:0 2px 3px 0 rgba(52,56,85,0.25);--va-control-box-shadow:none;--va-control-border:0;--va-transition:0.2s cubic-bezier(0.4,0,0.6,1);--va-outline-border-width:0.125rem;--va-outline-box-shadow:none;--va-square-border-radius:0.25rem;--va-form-padding:1.25rem;--va-form-border-radius:0.125rem;--va-text-selected:#b3d4fc;--va-text-highlighted:#fff3d1;--va-link-color:var(--va-primary);--va-link-color-secondary:var(--va-secondary);--va-link-color-hover:var(--va-primary);--va-link-color-active:var(--va-primary);--va-link-color-visited:var(--va-primary);--va-muted:#7f828b;--va-li-background:var(--va-theme-blue-dark);--va-text-block:var(--va-light-gray3);--va-stripe-border-size:0.25rem;--va-box-shadow:0 0.25rem 0.5rem 0 rgba(59,63,73,0.15);--va-modal-title-margin-bottom:1.5rem;--va-modal-container-position:fixed;--va-modal-container-top:0;--va-modal-container-left:0;--va-modal-container-z-index:1050;--va-modal-container-display:flex;--va-modal-container-width:100%;--va-modal-container-height:100%;--va-modal-container-align-items:center;--va-modal-container-justify-content:center;--va-modal-container-overflow:hidden;--va-modal-container-outline:0;--va-modal-dialog-background:#fff;--va-modal-dialog-min-height:3.125rem;--va-modal-dialog-height:fit-content;--va-modal-dialog-border-radius:0.375rem;--va-modal-dialog-margin:1rem;--va-modal-dialog-box-shadow:0 4px 70px -18px #707070;--va-modal-dialog-max-width:768px;--va-modal-dialog-max-height:calc(100vh - 2rem);--va-modal-dialog-position:relative;--va-modal-overlay-position:fixed;--va-modal-overlay-top:0;--va-modal-overlay-left:0;--va-modal-overlay-z-index:calc(var(--va-modal-container-z-index) - 1);--va-modal-overlay-width:100vw;--va-modal-overlay-height:100vh}.va-modal__title{font-size:.625rem;font-weight:700;letter-spacing:.6px;line-height:1.2;margin-bottom:1.5rem;text-transform:uppercase}.va-modal__container{align-items:var(--va-modal-container-align-items);display:var(--va-modal-container-display);height:var(--va-modal-container-height);justify-content:var(--va-modal-container-justify-content);left:var(--va-modal-container-left);outline:var(--va-modal-container-outline);overflow:var(--va-modal-container-overflow);position:var(--va-modal-container-position);top:var(--va-modal-container-top);width:var(--va-modal-container-width);z-index:var(--va-modal-container-z-index)}.va-modal__container--transition-enter-from,.va-modal__container--transition-leave-to{opacity:0;transform:translateY(-30%)}.va-modal__container--transition-enter-active,.va-modal__container--transition-leave-active{transition:opacity .15s cubic-bezier(1,.5,.8,1),transform .3s ease}.va-modal__dialog{background:var(--va-modal-dialog-background);border-radius:var(--va-modal-dialog-border-radius,var(--va-block-border-radius));box-shadow:var(--va-modal-dialog-box-shadow,var(--va-block-box-shadow));height:var(--va-modal-dialog-height);margin:var(--va-modal-dialog-margin);max-height:var(--va-modal-dialog-max-height);max-width:var(--va-modal-dialog-max-width);min-height:var(--va-modal-dialog-min-height);overflow:auto;position:var(--va-modal-dialog-position)}.va-modal__overlay{height:var(--va-modal-overlay-height);left:var(--va-modal-overlay-left);position:var(--va-modal-overlay-position);top:var(--va-modal-overlay-top);width:var(--va-modal-overlay-width);z-index:var(--va-modal-overlay-z-index)}.va-modal__overlay--transition-enter-from,.va-modal__overlay--transition-leave-to{opacity:0}.va-modal__overlay--transition-enter-active,.va-modal__overlay--transition-leave-active{transition:opacity .2s cubic-bezier(1,.5,.8,1)}.va-modal--fullscreen{border-radius:0;margin:0;min-height:100vh!important;min-width:100vw!important}@media (max-width:576px){.va-modal--mobile-fullscreen{border-radius:0;margin:0!important;min-height:100vh!important;min-width:100vw!important;position:fixed}}.va-modal--size-small{max-width:576px}@media (max-width:576px){.va-modal--size-small{max-width:100vw!important}}.va-modal--size-small .va-modal__inner{max-width:576px}@media (max-width:576px){.va-modal--size-small .va-modal__inner{max-width:100vw!important}}.va-modal--size-large,.va-modal--size-large .va-modal__inner{max-width:992px}.va-modal--fixed-layout .va-modal__inner{max-height:calc(100vh - 2rem);overflow:hidden;padding:1.25rem 0 1.5rem}.va-modal--fixed-layout .va-modal__inner .va-modal__footer,.va-modal--fixed-layout .va-modal__inner .va-modal__header,.va-modal--fixed-layout .va-modal__inner .va-modal__title{padding:0 1.875rem 0 1.5rem}.va-modal--fixed-layout .va-modal__inner .va-modal__message{overflow:auto;padding:0 1.875rem 0 1.5rem}.va-modal--fixed-layout .va-modal__dialog{overflow:hidden}.va-modal__message{margin-bottom:1.5rem}.va-modal__inner{display:flex;flex-flow:column;margin:auto;max-width:768px;overflow:visible;padding:1.25rem 1.875rem 1.5rem 1.5rem;position:relative}.va-modal__inner>div:last-of-type{margin-bottom:0!important}.va-modal__close{color:#babfc2;cursor:pointer;font-size:1.5rem!important;font-style:normal!important;position:absolute;right:1rem;top:1rem;z-index:1}.va-modal__footer{display:flex;flex-wrap:wrap;justify-content:center;margin-top:auto;min-height:-webkit-fit-content;min-height:-moz-fit-content;min-height:fit-content}.va-modal__footer:last-of-type{margin-bottom:0!important}'),O.render=function render(e,a,o,t,i,y){const x=r("modal-element"),b=r("va-icon"),_=r("va-button");return n(),l("div",j,[s(x,{name:"va-modal__overlay--transition",isTransition:!e.$props.withoutTransitions,appear:""},{default:d((()=>[e.valueComputed&&e.$props.overlay?(n(),l("div",{key:0,class:"va-modal__overlay",style:m(e.computedOverlayStyles)},null,4)):v("v-if",!0)])),_:1},8,["isTransition"]),s(x,{name:"va-modal__container--transition",isTransition:!e.$props.withoutTransitions,appear:"",onBeforeEnter:e.onBeforeEnterTransition,onAfterEnter:e.onAfterEnterTransition,onBeforeLeave:e.onBeforeLeaveTransition,onAfterLeave:e.onAfterLeaveTransition},{default:d((()=>[e.valueComputed?(n(),l("div",{key:0,class:"va-modal__container",style:m(e.computedModalContainerStyle)},[c("div",{class:h(["va-modal__dialog",e.computedClass]),style:m({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight}),ref:"modal"},[e.$props.fullscreen?(n(),p(b,{key:0,onClick:a[0]||(a[0]=a=>e.cancel()),name:"close",class:"va-modal__close"})):v("v-if",!0),c("div",{class:"va-modal__inner",style:m({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight})},[e.title?(n(),l("div",{key:0,class:"va-modal__title",style:m({color:e.theme.getColor("primary")})},u(e.$props.title),5)):v("v-if",!0),e.hasHeaderSlot?(n(),l("div",L,[f(e.$slots,"header")])):v("v-if",!0),e.$props.message?(n(),l("div",D,u(e.$props.message),1)):v("v-if",!0),e.hasContentSlot?(n(),l("div",A,[f(e.$slots,"default")])):v("v-if",!0),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?v("v-if",!0):(n(),l("div",V,[e.$props.cancelText?(n(),p(_,{key:0,color:"gray",class:"mr-2",flat:"",onClick:e.cancel},{default:d((()=>[g(u(e.$props.cancelText),1)])),_:1},8,["onClick"])):v("v-if",!0),s(_,{onClick:e.ok},{default:d((()=>[g(u(e.$props.okText),1)])),_:1},8,["onClick"])])),e.hasFooterSlot?(n(),l("div",H,[f(e.$slots,"footer")])):v("v-if",!0)],4)],6)],4)):v("v-if",!0)])),_:3},8,["isTransition","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])])},O.__file="src/components/va-modal/VaModal.vue";var K=e(O);export{K as default};
//# sourceMappingURL=index32.js.map
