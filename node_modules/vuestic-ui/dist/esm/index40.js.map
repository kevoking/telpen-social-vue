{"version":3,"file":"index40.js","sources":["../../src/components/va-scrollbar/VaScrollbar.vue","../../src/components/va-scrollbar/VaScrollbar.vue?vue&type=template&id=0542b7a0&lang.js","../../src/components/va-scrollbar/index.ts"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"va-scrollbar\"\r\n    ref=\"vuesticScrollbar\"\r\n  >\r\n    <div\r\n      class=\"scrollbar-wrapper\"\r\n      ref=\"scrollbarWrapper\"\r\n    >\r\n      <div\r\n        class=\"scrollbar-content\"\r\n        ref=\"scrollbarContent\"\r\n        @wheel=\"scroll\"\r\n        @touchstart=\"startDrag\"\r\n        @touchmove=\"onDrag\"\r\n        @touchend=\"stopDrag\"\r\n        @transitionend=\"onContentResize\"\r\n      >\r\n        <slot />\r\n      </div>\r\n      <div\r\n        class=\"track\"\r\n        ref=\"track\"\r\n      >\r\n        <div\r\n          class=\"thumb\"\r\n          ref=\"thumb\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { detect } from 'detect-browser'\r\nimport erd from 'element-resize-detector'\r\n\r\nconst browser = detect()\r\n\r\nexport default {\r\n  name: 'VaScrollbar',\r\n  props: {\r\n    speed: {\r\n      type: Number,\r\n      default: 20,\r\n    },\r\n  },\r\n  methods: {\r\n    calcSize () {\r\n      this.isDown = this.isUp = false\r\n      this.maxHeight = parseFloat(this.wrapper.offsetHeight, 10)\r\n      this.contentHeight = parseFloat(this.content.offsetHeight, 10)\r\n      this.trackHeight = parseFloat(this.track.offsetHeight, 10)\r\n\r\n      if (this.maxHeight / this.contentHeight * this.trackHeight < 10) {\r\n        this.thumb.style.height = 10 + 'px'\r\n      } else {\r\n        this.thumb.style.height = this.maxHeight / this.contentHeight * this.trackHeight + 'px'\r\n      }\r\n\r\n      if (this.maxHeight / this.contentHeight < 1) {\r\n        this.thumb.classList.add('active')\r\n      } else {\r\n        this.thumb.classList.remove('active')\r\n      }\r\n    },\r\n    calcThumb () {\r\n      const currentMT = this.content.style.marginTop === ''\r\n        ? 0\r\n        : parseInt(this.content.style.marginTop, 10)\r\n      this.thumb.style.top = (-currentMT / this.contentHeight * this.trackHeight) + 'px'\r\n    },\r\n    onContentResize () {\r\n      const prevHeight = this.contentHeight\r\n      this.calcSize()\r\n      this.calcThumb()\r\n\r\n      this.content.style.transition = 'margin-top .3s linear'\r\n      this.thumb.style.transition = 'top .3s linear'\r\n      const handler = (e) => {\r\n        if (e.propertyName === 'margin-top') {\r\n          this.content.style.transition = ''\r\n          this.calcSize()\r\n          this.calcThumb()\r\n          this.content.removeEventListener('transitionend', handler)\r\n          this.thumb.style.transition = ''\r\n        }\r\n      }\r\n      this.content.addEventListener('transitionend', handler)\r\n\r\n      this.setVertical(this.contentHeight - prevHeight)\r\n    },\r\n    startDrag (e) {\r\n      this.isDragging = true\r\n      this.prevTouch = e.touches[0]\r\n    },\r\n    onDrag (e) {\r\n      if (this.isDragging) {\r\n        e.preventDefault()\r\n        const touch = e.touches[0]\r\n        const delta = this.prevTouch.clientY - touch.clientY\r\n        this.setVertical(delta)\r\n        this.prevTouch = touch\r\n      }\r\n    },\r\n    stopDrag () {\r\n      this.isDragging = false\r\n    },\r\n    scroll (e) {\r\n      let delta = (e.deltaY * 0.01 * this.speed)\r\n      if (browser.name === 'firefox') {\r\n        delta *= 10\r\n      }\r\n      this.setVertical(delta)\r\n      e.preventDefault()\r\n    },\r\n    setVertical (delta) {\r\n      if ((this.isDown && delta > 0) || (this.isUp && delta < 0) || (this.contentHeight <= this.maxHeight)) {\r\n        return\r\n      }\r\n      const currentMT = this.content.style.marginTop === ''\r\n        ? 0\r\n        : parseFloat(this.content.style.marginTop, 10)\r\n      let nextMT = 0\r\n      if (this.maxHeight - (currentMT - delta) > this.contentHeight && delta > 0) {\r\n        nextMT = this.maxHeight - this.contentHeight\r\n        this.isDown = true\r\n      } else {\r\n        this.isDown = false\r\n        if (currentMT - delta > 0) {\r\n          this.isUp = true\r\n          nextMT = 0\r\n        } else {\r\n          nextMT = currentMT - delta\r\n          this.isUp = false\r\n        }\r\n      }\r\n\r\n      this.content.style.marginTop = nextMT + 'px'\r\n      this.calcThumb()\r\n    },\r\n  },\r\n  mounted () {\r\n    this.track = this.$refs.track\r\n    this.thumb = this.$refs.thumb\r\n    this.content = this.$refs.scrollbarContent\r\n    this.wrapper = this.$refs.scrollbarWrapper\r\n    this.calcSize()\r\n    this.calcThumb()\r\n    erd.listenTo(this.content, () => {\r\n      this.calcSize()\r\n      this.calcThumb()\r\n    })\r\n  },\r\n  beforeUnmount () {\r\n    erd.removeAllListeners(this.content)\r\n  },\r\n  data () {\r\n    return {\r\n      wrapper: undefined,\r\n      maxHeight: undefined,\r\n      thumb: undefined,\r\n      track: undefined,\r\n      trackHeight: undefined,\r\n      content: undefined,\r\n      contentHeight: undefined,\r\n      isDown: false,\r\n      isUp: true,\r\n      prevTouch: {},\r\n      isDragging: false,\r\n    }\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../../styles/resources/resources\";\r\n@import 'variables';\r\n\r\n.va-scrollbar {\r\n  background: var(--va-scrollbar-background);\r\n  transition: var(--va-scrollbar-transition);\r\n  position: var(--va-scrollbar-position);\r\n\r\n  .scrollbar-wrapper {\r\n    border-radius: var(--va-scrollbar-wrapper-border-radius);\r\n    box-shadow: var(--va-scrollbar-wrapper-box-shadow);\r\n    position: var(--va-scrollbar-wrapper-position);\r\n    overflow: var(--va-scrollbar-wrapper-overflow);\r\n    max-height: var(--va-scrollbar-wrapper-max-height);\r\n\r\n    .track {\r\n      width: var(--va-scrollbar-wrapper-track-width);\r\n      position: var(--va-scrollbar-wrapper-track-position);\r\n      right: var(--va-scrollbar-wrapper-track-right);\r\n      top: var(--va-scrollbar-wrapper-track-top);\r\n      height: var(--va-scrollbar-wrapper-track-height);\r\n\r\n      .thumb {\r\n        transition: var(--va-scrollbar-thumb-transition);\r\n        position: var(--va-scrollbar-thumb-position);\r\n        width: var(--va-scrollbar-thumb-width);\r\n        background-color: var(--va-scrollbar-thumb-background-color);\r\n        opacity: var(--va-scrollbar-thumb-opacity);\r\n\r\n        &.active {\r\n          opacity: 0.3;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  &:hover {\r\n    .thumb.active {\r\n      opacity: 1 !important;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div\r\n    class=\"va-scrollbar\"\r\n    ref=\"vuesticScrollbar\"\r\n  >\r\n    <div\r\n      class=\"scrollbar-wrapper\"\r\n      ref=\"scrollbarWrapper\"\r\n    >\r\n      <div\r\n        class=\"scrollbar-content\"\r\n        ref=\"scrollbarContent\"\r\n        @wheel=\"scroll\"\r\n        @touchstart=\"startDrag\"\r\n        @touchmove=\"onDrag\"\r\n        @touchend=\"stopDrag\"\r\n        @transitionend=\"onContentResize\"\r\n      >\r\n        <slot />\r\n      </div>\r\n      <div\r\n        class=\"track\"\r\n        ref=\"track\"\r\n      >\r\n        <div\r\n          class=\"thumb\"\r\n          ref=\"thumb\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { detect } from 'detect-browser'\r\nimport erd from 'element-resize-detector'\r\n\r\nconst browser = detect()\r\n\r\nexport default {\r\n  name: 'VaScrollbar',\r\n  props: {\r\n    speed: {\r\n      type: Number,\r\n      default: 20,\r\n    },\r\n  },\r\n  methods: {\r\n    calcSize () {\r\n      this.isDown = this.isUp = false\r\n      this.maxHeight = parseFloat(this.wrapper.offsetHeight, 10)\r\n      this.contentHeight = parseFloat(this.content.offsetHeight, 10)\r\n      this.trackHeight = parseFloat(this.track.offsetHeight, 10)\r\n\r\n      if (this.maxHeight / this.contentHeight * this.trackHeight < 10) {\r\n        this.thumb.style.height = 10 + 'px'\r\n      } else {\r\n        this.thumb.style.height = this.maxHeight / this.contentHeight * this.trackHeight + 'px'\r\n      }\r\n\r\n      if (this.maxHeight / this.contentHeight < 1) {\r\n        this.thumb.classList.add('active')\r\n      } else {\r\n        this.thumb.classList.remove('active')\r\n      }\r\n    },\r\n    calcThumb () {\r\n      const currentMT = this.content.style.marginTop === ''\r\n        ? 0\r\n        : parseInt(this.content.style.marginTop, 10)\r\n      this.thumb.style.top = (-currentMT / this.contentHeight * this.trackHeight) + 'px'\r\n    },\r\n    onContentResize () {\r\n      const prevHeight = this.contentHeight\r\n      this.calcSize()\r\n      this.calcThumb()\r\n\r\n      this.content.style.transition = 'margin-top .3s linear'\r\n      this.thumb.style.transition = 'top .3s linear'\r\n      const handler = (e) => {\r\n        if (e.propertyName === 'margin-top') {\r\n          this.content.style.transition = ''\r\n          this.calcSize()\r\n          this.calcThumb()\r\n          this.content.removeEventListener('transitionend', handler)\r\n          this.thumb.style.transition = ''\r\n        }\r\n      }\r\n      this.content.addEventListener('transitionend', handler)\r\n\r\n      this.setVertical(this.contentHeight - prevHeight)\r\n    },\r\n    startDrag (e) {\r\n      this.isDragging = true\r\n      this.prevTouch = e.touches[0]\r\n    },\r\n    onDrag (e) {\r\n      if (this.isDragging) {\r\n        e.preventDefault()\r\n        const touch = e.touches[0]\r\n        const delta = this.prevTouch.clientY - touch.clientY\r\n        this.setVertical(delta)\r\n        this.prevTouch = touch\r\n      }\r\n    },\r\n    stopDrag () {\r\n      this.isDragging = false\r\n    },\r\n    scroll (e) {\r\n      let delta = (e.deltaY * 0.01 * this.speed)\r\n      if (browser.name === 'firefox') {\r\n        delta *= 10\r\n      }\r\n      this.setVertical(delta)\r\n      e.preventDefault()\r\n    },\r\n    setVertical (delta) {\r\n      if ((this.isDown && delta > 0) || (this.isUp && delta < 0) || (this.contentHeight <= this.maxHeight)) {\r\n        return\r\n      }\r\n      const currentMT = this.content.style.marginTop === ''\r\n        ? 0\r\n        : parseFloat(this.content.style.marginTop, 10)\r\n      let nextMT = 0\r\n      if (this.maxHeight - (currentMT - delta) > this.contentHeight && delta > 0) {\r\n        nextMT = this.maxHeight - this.contentHeight\r\n        this.isDown = true\r\n      } else {\r\n        this.isDown = false\r\n        if (currentMT - delta > 0) {\r\n          this.isUp = true\r\n          nextMT = 0\r\n        } else {\r\n          nextMT = currentMT - delta\r\n          this.isUp = false\r\n        }\r\n      }\r\n\r\n      this.content.style.marginTop = nextMT + 'px'\r\n      this.calcThumb()\r\n    },\r\n  },\r\n  mounted () {\r\n    this.track = this.$refs.track\r\n    this.thumb = this.$refs.thumb\r\n    this.content = this.$refs.scrollbarContent\r\n    this.wrapper = this.$refs.scrollbarWrapper\r\n    this.calcSize()\r\n    this.calcThumb()\r\n    erd.listenTo(this.content, () => {\r\n      this.calcSize()\r\n      this.calcThumb()\r\n    })\r\n  },\r\n  beforeUnmount () {\r\n    erd.removeAllListeners(this.content)\r\n  },\r\n  data () {\r\n    return {\r\n      wrapper: undefined,\r\n      maxHeight: undefined,\r\n      thumb: undefined,\r\n      track: undefined,\r\n      trackHeight: undefined,\r\n      content: undefined,\r\n      contentHeight: undefined,\r\n      isDown: false,\r\n      isUp: true,\r\n      prevTouch: {},\r\n      isDragging: false,\r\n    }\r\n  },\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../../styles/resources/resources\";\r\n@import 'variables';\r\n\r\n.va-scrollbar {\r\n  background: var(--va-scrollbar-background);\r\n  transition: var(--va-scrollbar-transition);\r\n  position: var(--va-scrollbar-position);\r\n\r\n  .scrollbar-wrapper {\r\n    border-radius: var(--va-scrollbar-wrapper-border-radius);\r\n    box-shadow: var(--va-scrollbar-wrapper-box-shadow);\r\n    position: var(--va-scrollbar-wrapper-position);\r\n    overflow: var(--va-scrollbar-wrapper-overflow);\r\n    max-height: var(--va-scrollbar-wrapper-max-height);\r\n\r\n    .track {\r\n      width: var(--va-scrollbar-wrapper-track-width);\r\n      position: var(--va-scrollbar-wrapper-track-position);\r\n      right: var(--va-scrollbar-wrapper-track-right);\r\n      top: var(--va-scrollbar-wrapper-track-top);\r\n      height: var(--va-scrollbar-wrapper-track-height);\r\n\r\n      .thumb {\r\n        transition: var(--va-scrollbar-thumb-transition);\r\n        position: var(--va-scrollbar-thumb-position);\r\n        width: var(--va-scrollbar-thumb-width);\r\n        background-color: var(--va-scrollbar-thumb-background-color);\r\n        opacity: var(--va-scrollbar-thumb-opacity);\r\n\r\n        &.active {\r\n          opacity: 0.3;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  &:hover {\r\n    .thumb.active {\r\n      opacity: 1 !important;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import withConfigTransport from '../../services/config-transport/withConfigTransport'\r\nimport VaScrollbar from './VaScrollbar.vue'\r\n\r\nexport default withConfigTransport(VaScrollbar)\r\n"],"names":["browser","detect","name","props","speed","type","Number","default","methods","calcSize","this","isDown","isUp","maxHeight","parseFloat","wrapper","offsetHeight","contentHeight","content","trackHeight","track","thumb","style","height","classList","add","remove","calcThumb","currentMT","marginTop","parseInt","top","onContentResize","prevHeight","transition","handler","e","propertyName","removeEventListener","addEventListener","setVertical","startDrag","isDragging","prevTouch","touches","onDrag","preventDefault","touch","delta","clientY","stopDrag","scroll","deltaY","nextMT","mounted","$refs","scrollbarContent","scrollbarWrapper","erd","listenTo","beforeUnmount","removeAllListeners","data","undefined","class","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onWheel","$options","onTouchstart","onTouchmove","onTouchend","onTransitionend","_renderSlot","_hoisted_3","_hoisted_4","withConfigTransport","VaScrollbar"],"mappings":"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"}