var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,r,t)=>r in e?__defProp(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,__spreadValues=(e,r)=>{for(var t in r||(r={}))__hasOwnProp.call(r,t)&&__defNormalProp(e,t,r[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(r))__propIsEnum.call(r,t)&&__defNormalProp(e,t,r[t]);return e},__spreadProps=(e,r)=>__defProps(e,__getOwnPropDescs(r));!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("vue")):"function"==typeof define&&define.amd?define(["vue"],r):(e="undefined"!=typeof globalThis?globalThis:e||self).VLazyImage=r(e.Vue)}(this,(function(e){"use strict";return{props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:,"},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},inheritAttrs:!1,setup(r,{attrs:t,slots:o,emit:s}){const n=e.ref(null),i=e.reactive({observer:null,intersected:!1,loaded:!1}),c=e.computed((()=>i.intersected&&r.src?r.src:r.srcPlaceholder)),a=e.computed((()=>!(!i.intersected||!r.srcset)&&r.srcset)),l=()=>{n.value.getAttribute("src")!==r.srcPlaceholder&&(i.loaded=!0,s("load"))},d=()=>s("error",n.value);return e.onMounted((()=>{"IntersectionObserver"in window&&(i.observer=new IntersectionObserver((e=>{e[0].isIntersecting&&(i.intersected=!0,i.observer.disconnect(),s("intersect"))}),r.intersectionOptions),i.observer.observe(n.value))})),e.onBeforeUnmount((()=>{"IntersectionObserver"in window&&i.observer.disconnect()})),()=>{const s=e.h("img",__spreadProps(__spreadValues({ref:n,src:c.value,srcset:a.value||null},t),{class:[t.class,"v-lazy-image",{"v-lazy-image-loaded":i.loaded}],onLoad:l,onError:d}));return r.usePicture?e.h("picture",{ref:n,onLoad:l},i.intersected?[o.default,s]:[s]):s}}}}));
