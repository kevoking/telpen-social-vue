import {
  computed,
  h,
  init_vue_runtime_esm_bundler,
  onBeforeUnmount,
  onMounted,
  reactive,
  ref
} from "./chunk-IEQEELAL.js";
import "./chunk-A5AMJUWA.js";

// node_modules/v-lazy-image/dist/v-lazy-image.es.js
init_vue_runtime_esm_bundler();
var e = Object.defineProperty;
var r = Object.defineProperties;
var t = Object.getOwnPropertyDescriptors;
var s = Object.getOwnPropertySymbols;
var o = Object.prototype.hasOwnProperty;
var n = Object.prototype.propertyIsEnumerable;
var c = (r2, t2, s2) => t2 in r2 ? e(r2, t2, { enumerable: true, configurable: true, writable: true, value: s2 }) : r2[t2] = s2;
var v = { props: { src: { type: String, required: true }, srcPlaceholder: { type: String, default: "data:," }, srcset: { type: String }, intersectionOptions: { type: Object, default: () => ({}) }, usePicture: { type: Boolean, default: false } }, inheritAttrs: false, setup(e2, { attrs: v2, slots: b, emit: f }) {
  const y = ref(null), O = reactive({ observer: null, intersected: false, loaded: false }), g = computed(() => O.intersected && e2.src ? e2.src : e2.srcPlaceholder), P = computed(() => !(!O.intersected || !e2.srcset) && e2.srcset), m = () => {
    y.value.getAttribute("src") !== e2.srcPlaceholder && (O.loaded = true, f("load"));
  }, w = () => f("error", y.value);
  return onMounted(() => {
    "IntersectionObserver" in window && (O.observer = new IntersectionObserver((e3) => {
      e3[0].isIntersecting && (O.intersected = true, O.observer.disconnect(), f("intersect"));
    }, e2.intersectionOptions), O.observer.observe(y.value));
  }), onBeforeUnmount(() => {
    "IntersectionObserver" in window && O.observer.disconnect();
  }), () => {
    const i = h("img", (a = ((e3, r2) => {
      for (var t2 in r2 || (r2 = {}))
        o.call(r2, t2) && c(e3, t2, r2[t2]);
      if (s)
        for (var t2 of s(r2))
          n.call(r2, t2) && c(e3, t2, r2[t2]);
      return e3;
    })({ ref: y, src: g.value, srcset: P.value || null }, v2), l = { class: [v2.class, "v-lazy-image", { "v-lazy-image-loaded": O.loaded }], onLoad: m, onError: w }, r(a, t(l))));
    var a, l;
    return e2.usePicture ? h("picture", { ref: y, onLoad: m }, O.intersected ? [b.default, i] : [i]) : i;
  };
} };

// dep:v-lazy-image
var v_lazy_image_default = v;
export {
  v_lazy_image_default as default
};
//# sourceMappingURL=v-lazy-image.js.map
